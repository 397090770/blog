---           
layout: post
title: "Getting Started With ANTLR:Basics"
date: 2011-09-25 17:20:11 UTC
updated: 2011-09-25 17:20:11 UTC
comments: false
categories: 
---

<div dir="ltr" style="text-align: left;" trbidi="on"><div style="font-family: Verdana,sans-serif;">Yeah! It's after a lapse of a month or so that there is a post in this blog! :)<br />Well, this post drives you towards the basics of ANTLR. Previously, we had learnt about setting up of ANTLR as an external tool.&nbsp;</div><div style="font-family: Verdana,sans-serif;"><br /></div><div style="font-family: Verdana,sans-serif;">RECAP! It's here:<br /><a href="http://computegeeken.blogspot.com/2011/08/antlr-as-external-tool-in-eclipse-on.html%20">antlr-external tool</a>:)<br />So, here we go....<br /><br /><b>What is ANTLR?</b><br />• ANother Tool for Language Recognition, is a language tool that provides a framework for constructing recognizers, interpreters, compilers, and translators from grammatical descriptions containing actions.<br /><br /><b>What can be the target languages?</b><br />• Ada<br />• Action Script<br />• C<br />• C#; C#2<br />• C#3<br />• D<br />• Emacs ELisp<br />• Objective C<br />• Java<br />• Java Script<br />• Python<br />• Ruby<br />• Perl6<br />• Perl<br />• PHP<br />• Oberon<br />• Scala<br /><br /><b>What does ANTLR support?</b><br />• Tree construction<br />• Error recovery<br />• Error handling<br />• Tree walking<br />• Translation<br /><br /><b>What environment does it support?</b><br />ANTLRWorks is the IDE for ANTLR. It is the graphical grammar editor and debugger, written by Jean Bovet using Swing.<br /><br /><b><br />What for ANTLR can be used?</b><br />• ""REAL"" programming languages<br />• domain-specific languages [DSL]<br /><br /><b>Who is using ANTLR?</b><br />• Programming languages :Boo, Groovy, Mantra, Nemerle, XRuby etc.<br />• Other Tools: HIbernate, Intellij IDEA, Jazillian, JBoss Rules, Keynote(Apple), WebLogic(Oracle) etc.<br /><b><br />Where is that you can look for ANTLR?</b><br />You can always follow here<a href="http://www.blogger.com/%20http://www.antlr.org%20"> http://www.antlr.org </a><br />• to download ANTLR and ANTLRWorks, which are free and open source<br />• docs,articles,wiki,mailing list,examples.... You can catch everything here!<br /><br /><br /><span style="font-size: small;"><b>Row your Boat.... </b></span></div><ul style="text-align: left;"><li><u><span style="font-size: small;">Basic terms</span></u></li></ul><div style="font-family: Verdana,sans-serif; text-align: left;"><br />• Lexer : converts a stream of characters to a stream of tokens.<br />• Parser : processes of tokens, possibly creating AST<br />• Abstract Syntax Tree(AST): an intermediate tree representation of the parsed input that is simpler to process than the stream of tokens. It can as well be processed multiple times.<br />• Tree Parser: It processes an AST<br />• String Template: a library that supports using templates with placeholders for outputting text</div><ul style="text-align: left;"><li><u>General Steps</u></li></ul><div style="font-family: Verdana,sans-serif; text-align: left;"><br />• Write Grammar in one or more files<br />• Write string templates[optional]<br />• Debug your grammar with ANTLRWorks<br />• Generate classes from grammar<br />• Write an application that uses generated classes<br />• Feed the application text that conforms to the grammar<br /><br /><b>A Bit Further....</b><br /><br />Lets write a simple grammar which consists of <br />• Lexer<br />• Parser<br /><br />Lexer: Breaks the input stream into tokens</div><div style="font-family: Verdana,sans-serif; text-align: left;">Lets take the example of simple declaration type in C of the form "int a,b;" or "int a;" and same with float.</div><div style="font-family: Verdana,sans-serif; text-align: left;">As we see we can write lexer as follows:</div><div style="font-family: Verdana,sans-serif; text-align: left;"><span style="font-size: x-small;">//TestLexer.g</span></div><div style="font-family: Verdana,sans-serif; text-align: left;"><br /></div><div style="font-family: Verdana,sans-serif; text-align: left;"><span style="font-size: x-small;">grammar TestLexer;</span></div><div style="font-family: Verdana,sans-serif; text-align: left;"><span style="font-size: x-small;">ID&nbsp; : ('a'..'z'|'A'..'Z'|'_') ('a'..'z'|'A'..'Z'|'0'..'9'|'_'|'.'|'a'..'z'|'A'..'Z')*;</span></div><div style="font-family: Verdana,sans-serif; text-align: left;"><span style="font-size: x-small;">COMMA: ',';</span></div><div style="font-family: Verdana,sans-serif; text-align: left;"><span style="font-size: x-small;">SEMICOLON:';';</span></div><div style="font-family: Verdana,sans-serif; text-align: left;"><span style="font-size: x-small;">DATATYPE: 'int' | 'float';</span></div><div style="font-family: Verdana,sans-serif; text-align: left;"><br /></div><div style="font-family: Verdana,sans-serif; text-align: left;">As we could see, these were the characters that were to be converted to tokens.</div><div style="font-family: Verdana,sans-serif; text-align: left;">So, now lets write some rules which processes these tokens generated and may it create a parse tree accordingly.</div><div style="font-family: Verdana,sans-serif; text-align: left;"><span style="font-size: x-small;">//TestParser.g</span></div><div style="font-family: Verdana,sans-serif; text-align: left;"><br /></div><div style="font-family: Verdana,sans-serif; text-align: left;"><span style="font-size: x-small;">grammar TestParser;</span></div><div style="font-family: Verdana,sans-serif; text-align: left;"><span style="font-size: x-small;">options {</span></div><div style="font-family: Verdana,sans-serif; text-align: left;"><span style="font-size: x-small;">language : Java;</span></div><div style="font-family: Verdana,sans-serif; text-align: left;"><span style="font-size: x-small;">}</span></div><div style="font-family: Verdana,sans-serif; text-align: left;"><span style="font-size: x-small;">decl:DATATYPE ID (',' ID)* ;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></div><div style="font-family: Verdana,sans-serif; text-align: left;"><span style="font-size: x-small;"><br /></span>Running ANTLR on the grammar just generates the lexer and parser,TestParser and TestLexer. To actually try the grammar on some input, we<br />need a test rig with a main( ) method as follows:</div><div style="font-family: Verdana,sans-serif; text-align: left;"><span style="font-size: x-small;">// Test.java</span></div><div style="font-family: Verdana,sans-serif; text-align: left;"></div><div style="font-family: Verdana,sans-serif; text-align: left;"><span style="font-size: x-small;"><br />import org.antlr.runtime.*;<br />public class Test {<br />public static void main(String[] args) throws Exception {<br />// Create an input character stream from standard in<br />ANTLRFileStream input = new ANTLRFileStream("input"); // give path to the file input<br />// Create an ExprLexer that feeds from that stream</span></div><div style="font-family: Verdana,sans-serif; text-align: left;"><span style="font-size: x-small;">TestLexer lexer = new TestLexer(input);<br />// Create a stream of tokens fed by the lexer<br />CommonTokenStream tokens = new CommonTokenStream(lexer);<br />// Create a parser that feeds off the token stream<br />TestParser parser = new TestParser(tokens);<br />// Begin parsing at rule decl<br />parser.decl();<br />}<br />}</span></div><div style="font-family: Verdana,sans-serif; text-align: left;"><br /></div><div style="font-family: Verdana,sans-serif; text-align: left;"><span style="font-size: small;">We shall see how to create</span> an AST and walk over the tree in the next blog post...</div><div style="font-family: Verdana,sans-serif; text-align: left;">Happy learning....! :)</div></div><img src="http://feeds.feedburner.com/~r/blogspot/jODW/~4/Hobz0STn-do" height="1" width="1"/>